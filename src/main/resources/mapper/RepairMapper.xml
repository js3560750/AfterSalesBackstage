<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jinsong.mapper.RepairMapper">
	<resultMap id="BaseResultMap" type="com.jinsong.model.Repair">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Feb 09 
			11:45:50 CST 2018. -->
		<id column="id" jdbcType="BIGINT" property="id" />
		<result column="gmt_create" jdbcType="TIMESTAMP" property="gmtCreate" />
		<result column="gmt_modified" jdbcType="TIMESTAMP" property="gmtModified" />
		<result column="order_number" jdbcType="VARCHAR" property="orderNumber" />
		<result column="openid" jdbcType="VARCHAR" property="openid" />
		<result column="engineer" jdbcType="VARCHAR" property="engineer" />
		<result column="engineer_tel" jdbcType="VARCHAR" property="engineerTel" />
		<result column="status" jdbcType="VARCHAR" property="status" />
		<result column="apply_time" jdbcType="TIMESTAMP" property="applyTime" />
		<result column="expect_time" jdbcType="VARCHAR" property="expectTime" />
		<result column="deal_time" jdbcType="TIMESTAMP" property="dealTime" />
		<result column="estimated_arrival_time" jdbcType="TIMESTAMP"
			property="estimatedArrivalTime" />
		<result column="arrivaled_time" jdbcType="TIMESTAMP" property="arrivaledTime" />
		<result column="finished_time" jdbcType="TIMESTAMP" property="finishedTime" />
		<result column="hospital_name" jdbcType="VARCHAR" property="hospitalName" />
		<result column="hospital_contact" jdbcType="VARCHAR" property="hospitalContact" />
		<result column="hospital_tel" jdbcType="VARCHAR" property="hospitalTel" />
		<result column="product_name" jdbcType="VARCHAR" property="productName" />
		<result column="product_model" jdbcType="VARCHAR" property="productModel" />
		<result column="serial_number" jdbcType="VARCHAR" property="serialNumber" />
		<result column="product_version" jdbcType="VARCHAR" property="productVersion" />
		<result column="hospital_error_describe" jdbcType="VARCHAR"
			property="hospitalErrorDescribe" />
		<result column="install_date" jdbcType="TIMESTAMP" property="installDate" />
		<result column="is_insuranced" jdbcType="TINYINT" property="isInsuranced" />
		<result column="is_return_factory" jdbcType="TINYINT" property="isReturnFactory" />
		<result column="is_replace_product" jdbcType="TINYINT"
			property="isReplaceProduct" />
		<result column="current_sample_count" jdbcType="INTEGER"
			property="currentSampleCount" />
		<result column="sample_box_type" jdbcType="VARCHAR" property="sampleBoxType" />
		<result column="reagent_type" jdbcType="VARCHAR" property="reagentType" />
		<result column="error_type" jdbcType="VARCHAR" property="errorType" />
		<result column="phenomenon" jdbcType="VARCHAR" property="phenomenon" />
		<result column="reason" jdbcType="VARCHAR" property="reason" />
		<result column="solution" jdbcType="VARCHAR" property="solution" />
		<result column="replace_name_code" jdbcType="VARCHAR" property="replaceNameCode" />
		<result column="original_name_code" jdbcType="VARCHAR"
			property="originalNameCode" />
		<result column="product_condition" jdbcType="VARCHAR" property="productCondition" />
		<result column="order_remarks" jdbcType="VARCHAR" property="orderRemarks" />
		<result column="price" jdbcType="DECIMAL" property="price" />
		<result column="service_rating" jdbcType="TINYINT" property="serviceRating" />
		<result column="hospital_complaint" jdbcType="VARCHAR"
			property="hospitalComplaint" />
	</resultMap>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Feb 09 
			11:45:50 CST 2018. -->
		delete from repair
		where id = #{id,jdbcType=BIGINT}
	</delete>
	<insert id="insert" parameterType="com.jinsong.model.Repair">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Feb 09 
			11:45:50 CST 2018. -->
		<selectKey keyProperty="id" order="AFTER" resultType="java.lang.Long">
			SELECT LAST_INSERT_ID()
		</selectKey>
		insert into repair (gmt_create, gmt_modified, order_number,
		openid, engineer, engineer_tel,
		status, apply_time, expect_time,
		deal_time, estimated_arrival_time, arrivaled_time,
		finished_time, hospital_name, hospital_contact,
		hospital_tel, product_name, product_model,
		serial_number, product_version, hospital_error_describe,
		install_date, is_insuranced, is_return_factory,
		is_replace_product, current_sample_count, sample_box_type,
		reagent_type, error_type, phenomenon,
		reason, solution, replace_name_code,
		original_name_code, product_condition, order_remarks,
		price, service_rating, hospital_complaint
		)
		values (#{gmtCreate,jdbcType=TIMESTAMP}, #{gmtModified,jdbcType=TIMESTAMP},
		#{orderNumber,jdbcType=VARCHAR},
		#{openid,jdbcType=VARCHAR}, #{engineer,jdbcType=VARCHAR}, #{engineerTel,jdbcType=VARCHAR},
		#{status,jdbcType=VARCHAR}, #{applyTime,jdbcType=TIMESTAMP},
		#{expectTime,jdbcType=VARCHAR},
		#{dealTime,jdbcType=TIMESTAMP}, #{estimatedArrivalTime,jdbcType=TIMESTAMP},
		#{arrivaledTime,jdbcType=TIMESTAMP},
		#{finishedTime,jdbcType=TIMESTAMP}, #{hospitalName,jdbcType=VARCHAR},
		#{hospitalContact,jdbcType=VARCHAR},
		#{hospitalTel,jdbcType=VARCHAR}, #{productName,jdbcType=VARCHAR}, #{productModel,jdbcType=VARCHAR},
		#{serialNumber,jdbcType=VARCHAR}, #{productVersion,jdbcType=VARCHAR},
		#{hospitalErrorDescribe,jdbcType=VARCHAR},
		#{installDate,jdbcType=TIMESTAMP}, #{isInsuranced,jdbcType=TINYINT},
		#{isReturnFactory,jdbcType=TINYINT},
		#{isReplaceProduct,jdbcType=TINYINT},
		#{currentSampleCount,jdbcType=INTEGER},
		#{sampleBoxType,jdbcType=VARCHAR},
		#{reagentType,jdbcType=VARCHAR}, #{errorType,jdbcType=VARCHAR}, #{phenomenon,jdbcType=VARCHAR},
		#{reason,jdbcType=VARCHAR}, #{solution,jdbcType=VARCHAR},
		#{replaceNameCode,jdbcType=VARCHAR},
		#{originalNameCode,jdbcType=VARCHAR},
		#{productCondition,jdbcType=VARCHAR},
		#{orderRemarks,jdbcType=VARCHAR},
		#{price,jdbcType=DECIMAL}, #{serviceRating,jdbcType=TINYINT},
		#{hospitalComplaint,jdbcType=VARCHAR}
		)
	</insert>
	<update id="updateByPrimaryKey" parameterType="com.jinsong.model.Repair">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Feb 09 
			11:45:50 CST 2018. -->
		update repair
		set gmt_create = #{gmtCreate,jdbcType=TIMESTAMP},
		gmt_modified = #{gmtModified,jdbcType=TIMESTAMP},
		order_number = #{orderNumber,jdbcType=VARCHAR},
		openid = #{openid,jdbcType=VARCHAR},
		engineer = #{engineer,jdbcType=VARCHAR},
		engineer_tel = #{engineerTel,jdbcType=VARCHAR},
		status = #{status,jdbcType=VARCHAR},
		apply_time = #{applyTime,jdbcType=TIMESTAMP},
		expect_time = #{expectTime,jdbcType=VARCHAR},
		deal_time = #{dealTime,jdbcType=TIMESTAMP},
		estimated_arrival_time = #{estimatedArrivalTime,jdbcType=TIMESTAMP},
		arrivaled_time = #{arrivaledTime,jdbcType=TIMESTAMP},
		finished_time = #{finishedTime,jdbcType=TIMESTAMP},
		hospital_name = #{hospitalName,jdbcType=VARCHAR},
		hospital_contact = #{hospitalContact,jdbcType=VARCHAR},
		hospital_tel = #{hospitalTel,jdbcType=VARCHAR},
		product_name = #{productName,jdbcType=VARCHAR},
		product_model = #{productModel,jdbcType=VARCHAR},
		serial_number = #{serialNumber,jdbcType=VARCHAR},
		product_version = #{productVersion,jdbcType=VARCHAR},
		hospital_error_describe = #{hospitalErrorDescribe,jdbcType=VARCHAR},
		install_date = #{installDate,jdbcType=TIMESTAMP},
		is_insuranced = #{isInsuranced,jdbcType=TINYINT},
		is_return_factory = #{isReturnFactory,jdbcType=TINYINT},
		is_replace_product = #{isReplaceProduct,jdbcType=TINYINT},
		current_sample_count = #{currentSampleCount,jdbcType=INTEGER},
		sample_box_type = #{sampleBoxType,jdbcType=VARCHAR},
		reagent_type = #{reagentType,jdbcType=VARCHAR},
		error_type = #{errorType,jdbcType=VARCHAR},
		phenomenon = #{phenomenon,jdbcType=VARCHAR},
		reason = #{reason,jdbcType=VARCHAR},
		solution = #{solution,jdbcType=VARCHAR},
		replace_name_code = #{replaceNameCode,jdbcType=VARCHAR},
		original_name_code = #{originalNameCode,jdbcType=VARCHAR},
		product_condition = #{productCondition,jdbcType=VARCHAR},
		order_remarks = #{orderRemarks,jdbcType=VARCHAR},
		price = #{price,jdbcType=DECIMAL},
		service_rating = #{serviceRating,jdbcType=TINYINT},
		hospital_complaint = #{hospitalComplaint,jdbcType=VARCHAR}
		where id = #{id,jdbcType=BIGINT}
	</update>
	<select id="selectByPrimaryKey" parameterType="java.lang.Long"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Feb 09 
			11:45:50 CST 2018. -->
		select id, gmt_create, gmt_modified, order_number, openid, engineer,
		engineer_tel,
		status, apply_time, expect_time, deal_time, estimated_arrival_time,
		arrivaled_time,
		finished_time, hospital_name, hospital_contact, hospital_tel, product_name,
		product_model,
		serial_number, product_version, hospital_error_describe, install_date,
		is_insuranced,
		is_return_factory, is_replace_product, current_sample_count, sample_box_type,
		reagent_type,
		error_type, phenomenon, reason, solution, replace_name_code, original_name_code,
		product_condition, order_remarks, price, service_rating,
		hospital_complaint
		from repair
		where id = #{id,jdbcType=BIGINT}
	</select>
	<select id="selectAll" resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Feb 09 
			11:45:50 CST 2018. -->
		select id, gmt_create, gmt_modified, order_number, openid, engineer,
		engineer_tel,
		status, apply_time, expect_time, deal_time, estimated_arrival_time,
		arrivaled_time,
		finished_time, hospital_name, hospital_contact, hospital_tel, product_name,
		product_model,
		serial_number, product_version, hospital_error_describe, install_date,
		is_insuranced,
		is_return_factory, is_replace_product, current_sample_count, sample_box_type,
		reagent_type,
		error_type, phenomenon, reason, solution, replace_name_code, original_name_code,
		product_condition, order_remarks, price, service_rating,
		hospital_complaint
		from repair
		order by id desc
	</select>
	<select id="selectLastOne" resultMap="BaseResultMap">
		select *
		from repair
		order by id desc
		limit 1
	</select>
	<select id="selectAllByOpenid" resultMap="BaseResultMap">
		select *
		from repair
		where openid =#{openid,jdbcType=VARCHAR}
		order by id desc
	</select>
	<select id="selectByStautsNull" resultMap="BaseResultMap">
		<!-- 
			select * from 表 where 字段=null 
			这里字段=null在SQL语句中会返回UnKnow，UnKnow会试做false，因为不是ture，所以查询不到结果 
			用 where 字段 is null 如果是空值就会返回true，就能查到结果（having也是） 
			
			需要注意的是，在分组子句与排序子句中，sql视null是相等的 
			即： 1，GROUP BY会把所有NULL值分到一组。 2，ORDER BY会把所有NULL值排列在一起。 
		-->
		select *
		from repair
		where status = '未处理'
		order by id desc
	</select>
	<select id="selectBySearch" resultMap="BaseResultMap">
		select *
		from repair
		where hospital_name like "%"#{searchInfo}"%" or engineer like "%"#{searchInfo}"%"
		order by id desc
	</select>
	<select id="selectUnfinishByOpenid" resultMap="BaseResultMap">
		select *
		from repair
		where openid =#{openid,jdbcType=VARCHAR} and status !='已完成'
		order by id desc
	</select>
	
	<select id="selectUnfinishedRepairByEngineer" resultMap="BaseResultMap">
		select *
		from repair
		where engineer_tel =#{account,jdbcType=VARCHAR} and status !='已完成'
		order by id desc
	</select>
	
	<select id="selectFinishedRepairByEngineer" resultMap="BaseResultMap">
		select *
		from repair
		where engineer_tel =#{account,jdbcType=VARCHAR} and status ='已完成'
		order by id desc
	</select>
</mapper>